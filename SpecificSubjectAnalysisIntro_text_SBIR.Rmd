

**Thank You** for  taking part in the MyExposome demonstration project funded by the National Institute of Health (NIH).  We are analyzing your wristband to report any detectable level of each of  **`r howManyChemicalsTested`** compounds.  



```{r  specificSubjectIntroGraph2,echo=FALSE, message=FALSE,fig.height=6, fig.cap="", dpi=300}


barData <- data.frame(Which=c("Minimum Found","Your Wristband Count","Average","Maximum Found"),
                      numberChemicals=c(minChemFoundOnAnyOneWristband,howManyChemicalsFoundThisWristband,averageNumberChemsFound,maxChemFoundOnAnyOneWristband),
                      cond=c('lightblue','darkgreen','lightblue','lightblue')
)  %>% arrange(numberChemicals)
p<- ggplot(data=barData, aes(x=factor(reorder(Which,+numberChemicals)), y=numberChemicals,fill=cond)) +
  geom_bar(stat="identity")+
  theme_minimal()+
  geom_text(aes(label=numberChemicals), vjust=-0.3, size=6) + theme(legend.position="none") +
  labs(title="Number of chemicals found per Wristband",
       x="", y = "Number Chemicals Found on Wristbands") +
  theme(plot.title = element_text(size=18)) +
  theme(axis.title.y = element_text(size = 18)) +
  theme(axis.text.x = element_text(size = 14))  +
  scale_fill_identity()
#+  theme(aspect.ratio=1/2 )   # This line WAS supposed to shrink things BUT the figure settings in the title area of this grey box did the trick

p

```





The total number of chemicals found in your wristband was **`r howManyChemicalsFoundThisWristband`**. The average number of chemicals found across all tested wristbands in this project was **`r round(averageNumberChemsFound,1) `**.  The maximum number of chemicals found on any one wristband was **`r maxChemFoundOnAnyOneWristband`**.  The minimum number of chemicals found on any one wristband was **`r minChemFoundOnAnyOneWristband`**.    

The total number of distinct chemicals found across all the wristbands in this study was **`r howManyUniqueChemFoundAcrossAllWristbands`**.

`r testExplanation`

You were one of  **`r howManyWristbandsTested`** participants in this demonstration project. The analysis was done with unique identifiers assigned to each wristband so your personal information is protected. Your unique subject name for the purposes of this analysis is:   **`r subject`**.


[comment1]: # (The line below, taken out of comment, will identify the MyExposome subject name (not show in output).)

[comment2]: # (You were originally assigned, by MyExposome, the unique subject identifier of **`r pureSubjectName`**.)


In addition to your silicone wristband results discussed below, we also asked you to wear a bracelet and a necklace containing silicone wristbands. One of the objectives of the study was to compare the results of the wristband with the chemical readings from the other devices. We have included a high-level summary of the device comparison which will be provided in the “additional information” section at the end of the report.

The rest of this report provides information and results based on the wristband since this is the most accurate and tested method of providing results of environmental exposure.



&nbsp;


```{r  epaIris, results='asis', echo=FALSE, message=FALSE}

testValue<-TRUE


#Calculate epa IRIS results but display it later

#  Join our results on one subject with classification table to get classification(s) of each chem
#  DO THIS without using SQL
#  Do this for ONERESULT
oneResultEpaIris<-inner_join(oneResult_with_Y_flag,epaIris,by="ParameterID") %>%
  select(ParameterName,IRIS_Summary) %>%
  arrange(ParameterName)

names(oneResultEpaIris)<-c("Chemical Name", "IRIS Summary Web Link")

numEPAirisFound<-nrow(oneResultEpaIris)


```


```{r  califProp65, results='asis', echo=FALSE, message=FALSE}

# calculate califProp65 results but print later

#  Join our results on one subject with classification table to get classification(s) of each chem
# Without using SQL
oneResultCalifProp65Risk<-inner_join(oneResult_with_Y_flag,riskCalifProp65,by="ParameterID") %>%
  select(ParameterName,Risk_Description=toxicityType) %>%
  arrange(ParameterName)

names(oneResultCalifProp65Risk)<-c("Chemical Name", "Risk Type Per California Prop 65")

# #How many were found?
numCalProp65Found<-nrow(oneResultCalifProp65Risk)
# 



#rm(riskCalifProp65)
```


```{r IARC, results='asis', echo=FALSE, message=FALSE}

#calculate IARC results, print later

#  Join our results on one subject with classification table to get classification(s) of each chem
# Without using SQL
oneResultIARCRisk<-inner_join(oneResult_with_Y_flag,IARCRisk,by="ParameterID") %>%
  select(ParameterName,IARC_Classification) %>%
  arrange(ParameterName)

#Rename the two columns
names(oneResultIARCRisk)<-c("Chemical Name", "Risk Type Per IARC")

#How many were found
numIARCRiskFound<-nrow(oneResultIARCRisk)


```




